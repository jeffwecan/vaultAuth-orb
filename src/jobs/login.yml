description: >
  Login to Vault using the CircleCI auth method.

docker:
  - image: 'cimg/base:stable'
resource_class: small

parameters:
  vault-addr:
    description: Vault address
    type: string
  path:
    default: "circleci"
    description: Path for the auth method, leave blank to use default path based on chosen method
    type: string

steps:
  - install
  - print-nonce:
      vault-addr: << parameters.vault-addr >>
      path: << parameters.path >>
  - login:
      vault-addr: << parameters.vault-addr >>
      path: << parameters.path >>
